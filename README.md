Automated API Requests for OpenAI API
=====================================

This project includes a straightforward Python script for sending multiple automated requests to the OpenAI API. 
Its purpose is to handle large quantities of requests that would be impractical to perform through the web interface 
alone. The script is intended to utilize a CSV file as input, streamlining the process of sending straightforward 
prompting requests without requiring extra code. However, it should be noted that the script uses default generation 
values and does not support the inclusion of chat history in the prompts.

Installation & Setup
--------------------
The system is developed by using _Python 3.8.10_.
It is tested in _Linux Mint 20.3_ operating system. 
The example codes given in this tutorial below is mainly for usage in Linux. 
They may be adapted to be used in other systems as well.

1. Create a Python virtual environment. In the example below, the Linux command creates a Python 3 environment named `.env` as a hidden folder.

    ```bash
    # Run the following command inside the project folder.
    python3 -m venv .env
    ```

2. Install the contents of the `requirements.txt` within the virtual environment.

    ```bash
    # Activate the virtual environment
    source activate .env
    # Install the packages given in "requirements.txt"
    pip install -r requirements.txt
    ```
   
3. Modify the `config.yml` to fill in your own relevant data. For detailed instructions on each required key, refer to the file itself. Ensure that you keep the file's original name and location, and only adjust the key values within the file as needed to suit your specific requirements.

Usage
-----

1. Insert your prompts and a few more required information to a CSV file. you can use a CSV file named `prompts.csv` as a reference. Below, we provide descriptions for each column within this file to guide you on what information should be entered.

    *  _iterations_: In this column, input the number of requests you intend to make for the prompt in the same row.
    *  _model_: This column is used to specify the model you want to utilize for the text generation process. Currently, the options are limited to "gpt-3.5" or "gpt-4".
    *  _prompt_:  Under this column, compose your primary input prompt. This prompt will be treated as if you were typing it to ChatGPT. If your prompt includes the semicolon symbol (;), enclose your text within double quotation marks ("").
    *  _system_ (optional): If you have specific system instructions for the model, you can enter them under this column. This column is entirely optional.

   Note: When opening the file in plain text or automating modifications, remember to use the semicolon (;) as the delimiter.

2. Now you should be able to call `main.py` to send your prompts to the API.

    ```bash
    python main.py
    ```
   
3. Running the script is going to create the following files.

    *  _JSON-Lines output file_: This file stores the data generated by requests. It also includes additional information such as the original prompt, timestamp, and metadata provided by the OpenAI API, which can be used for in-depth analysis. The file automatically updates itself after each successful request. The file name and path can be configured within the `config.yml` file (default="generations.jsonl").
    *  _CSV output file_: This file contains identical data to the JSON-Lines file, excluding the metadata. It is only generated once all requests have been successfully completed. If you do not find this file but do see the JSON-Lines file, you can simply rerun the `main.py` to finalize the process.
    *  _progress file_: This file is generated to monitor the progress of requests. It essentially mirrors the input file containing prompts. After each successful request, the number of iterations for each prompt is updated within this file. The script also references this file to avoid making unnecessary requests. The filename and path are derived from the input file's path with the addition of the "_progress" phrase.

License
-------
The project is publicly distributed under the MIT License.
